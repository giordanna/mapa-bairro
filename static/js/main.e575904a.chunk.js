(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{320:function(e,a,t){e.exports=t(756)},325:function(e,a,t){},327:function(e,a,t){},329:function(e,a,t){},541:function(e,a){},543:function(e,a){},575:function(e,a){},576:function(e,a){},624:function(e,a){},626:function(e,a){},649:function(e,a){},756:function(e,a,t){"use strict";t.r(a);var o=t(0),r=t.n(o),n=t(55),i=t.n(n),c=(t(325),t(56)),s=t(57),l=t(60),d=t(58),u=t(61),m=(t(327),t(329),t(96)),g=t(319),p=t(179),f=t.n(p),h=t(128),v=Object(g.a)(m.withScriptjs,m.withGoogleMap)(function(e){return r.a.createElement(m.GoogleMap,{clickableIcons:!1,defaultZoom:15,defaultCenter:{lat:-1.4413,lng:-48.4837},onClick:function(a){return e.pesquisaFoursquare(a.latLng,e.addLista,e.abrirModal)}},e.marcadores.map(function(a,t){return r.a.createElement(E,{key:t,marcador:a,selecionarMarcador:e.selecionarMarcador,marcadorSelecionado:e.marcadorSelecionado})}))}),E=function(e){function a(){return Object(c.a)(this,a),Object(l.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.marcador,t=e.selecionarMarcador,o=e.marcadorSelecionado;return r.a.createElement(m.Marker,{animation:window.google.maps.Animation.DROP,icon:{url:o==a?"http://maps.google.com/mapfiles/ms/icons/blue-dot.png":"http://maps.google.com/mapfiles/ms/icons/red-dot.png"},position:{lat:a.lat,lng:a.lng},onClick:function(){return t(a)}})}}]),a}(o.Component),b=function(e){function a(){var e,t;Object(c.a)(this,a);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=Object(l.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={modalOpen:!1,possiveisLocais:[]},t.abrirModal=function(){t.setState({modalOpen:!0})},t.fecharModal=function(){t.setState({modalOpen:!1})},t.addLista=function(e){t.setState({possiveisLocais:e})},t.pesquisaFoursquare=function(e,a,t){var o=[];f()({url:"https://api.foursquare.com/v2/venues/explore",method:"GET",qs:{client_id:"DFT4IMWTELLO00IVL3AHBOBW45LRBGO0D34SY14E155LUCBK",client_secret:"FT25LN2Q2LAI0KMPSY5YEACTC0X2DFXCQKNKB1TQTYLLQ3NC",ll:e.lat()+","+e.lng(),v:"20180323"}},function(e,r,n){if(e)console.error(e);else if(429===JSON.parse(n).meta.code)console.error(JSON.parse(n).meta.errorDetail),o=[{id:"erro",nome:"Erro: n\xe3o foi poss\xedvel recuperar",endereco:"Se voc\xea estiver vendo isso, provavelmente o limite de requisi\xe7\xf5es foi atingido. Aguarde um dia."}];else{var i=JSON.parse(n);i.response.groups[0].items&&(o=i.response.groups[0].items.sort(function(e,a){return e.venue.location.distance-a.venue.location.distance}).map(function(e){return{id:e.venue.id,nome:e.venue.name,endereco:e.venue.location.address,lat:e.venue.location.lat,lng:e.venue.location.lng,categoria:e.venue.categories[0].name,img:"/img/erro.jpg"}}),a(o),t())}})},t.atualizarImagem=function(e,a){"erro"!==e.id&&f()({url:"https://api.foursquare.com/v2/venues/"+e.id+"/photos",method:"GET",qs:{client_id:"DFT4IMWTELLO00IVL3AHBOBW45LRBGO0D34SY14E155LUCBK",client_secret:"FT25LN2Q2LAI0KMPSY5YEACTC0X2DFXCQKNKB1TQTYLLQ3NC",v:"20180323",limit:"1"}},function(t,o,r){if(t)console.error(t);else if(429===JSON.parse(r).meta.code)console.error(JSON.parse(r).meta.errorDetail);else{var n=JSON.parse(r);console.log(n),n.response.photos.items[0]&&(e.img=n.response.photos.items[0].prefix+"width"+n.response.photos.items[0].width+n.response.photos.items[0].suffix)}a(e)})},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.isLateralToggled,o=a.marcadores,n=a.selecionarMarcador,i=a.createMarcador,c=a.marcadorSelecionado;return r.a.createElement("main",{className:t?"mapa-toggle":"mapa"},r.a.createElement(v,{pesquisaFoursquare:this.pesquisaFoursquare,selecionarMarcador:n,marcadores:o,marcadorSelecionado:c,abrirModal:this.abrirModal,addLista:this.addLista,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBDk9y-BWlt1u5klFVBGxWocj2DnHV_e9k&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),r.a.createElement("div",null,r.a.createElement(h.a,{open:this.state.modalOpen,onClose:this.fecharModal,center:!0},r.a.createElement("h2",null,"Escolha o local que voc\xea gostaria de adicionar:"),this.state.possiveisLocais.map(function(a,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"local-escolher",onClick:function(){e.atualizarImagem(a,i),e.fecharModal()}},r.a.createElement("h3",null,a.nome),r.a.createElement("p",null,r.a.createElement("strong",null,"Categoria: "),a.categoria),r.a.createElement("p",null,r.a.createElement("strong",null,"Endere\xe7o: "),a.endereco)),r.a.createElement("hr",null))}))))}}]),a}(o.Component),S=function(e){function a(){return Object(c.a)(this,a),Object(l.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.marcadores,t=e.marcadorSelecionado,o=e.selecionarMarcador,n=e.isLateralToggled,i=e.updateQuery,c=e.query;return r.a.createElement("aside",{className:n?"sidebar-toggle":"sidebar"},r.a.createElement("input",{type:"text",className:"entrada-filtro",placeholder:"Filtre aqui... \ud83d\udd0e",value:c,onChange:function(e){return i(e.target.value)}}),a.map(function(e,a){return r.a.createElement("div",{key:a,className:"sidebar-inner"+(t==e?" selecionado":""),onClick:function(){return o(e)}},r.a.createElement("p",null,e.nome))}))}}]),a}(o.Component),O=t(318),w=t.n(O),y=t(97),L=function(e){function a(){var e,t;Object(c.a)(this,a);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=Object(l.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={marcadores:[{id:"5572f58a498eef85adf4f1b4",nome:"Porpino Burger",endereco:"Jer\xf4nimo Pimentel, 242",lat:-1.442430694656103,lng:-48.488064103178374,categoria:"Hamburgueria",img:"https://fastly.4sqi.net/img/general/width960/21789324_2E9_KjuF0gbEvyXpKZECwylJ46jlHXdoiOVD3EzDLDg.jpg"},{id:"4c310017ac0ab71342201c1e",nome:"Roxy Bar",endereco:"Av. Senador Lemos, 231",lat:-1.4412027502407205,lng:-48.489757776260376,categoria:"Restaurante Brasileiro",img:"https://fastly.4sqi.net/img/general/width540/rOzIJJ-OZof180f5osQ6wIkPz0nSYlWgfTRZidmsV-k.jpg"},{id:"4d95fca8daec224bf29d0b3e",nome:"Cia. Paulista de Pizza",endereco:"Av. Visc. de Souza Franco, 559",lat:-1.443236819183104,lng:-48.48991106226811,categoria:"Pizzaria",img:"https://fastly.4sqi.net/img/general/width720/ui_jo7sFhPgq4hrexbiDdouwf_l-3H4skjAUWadUQ4A.jpg"},{id:"4eb732a9991165b76327d02e",nome:"D'Opar\xe1",endereco:"Av. Sen. Lemos",lat:-1.4421665904806702,lng:-48.48984166720438,categoria:"Bar",img:"https://fastly.4sqi.net/img/general/width720/32543379__rH7XAvKtJxn1zqDXEcMA9r0gvBWOnpjJFXdZhBxmww.jpg"},{id:"4bd074c841b9ef3ba113fae5",nome:"Cairu",endereco:"Boulevard Shopping (Piso 4, Lj. 412)",lat:-1.445670539090734,lng:-48.48890663650532,categoria:"Sorveteria",img:"https://fastly.4sqi.net/img/general/width720/6311225_UWZLEqh5eRLIDSLeRnphkSDKU-c3SQnMsWFDTdHgeMA.jpg"}],isLateralToggled:!1,marcadorSelecionado:null,query:"",modalOpen:!1},t.updateQuery=function(e){t.setState({query:e.trim()})},t.removeMarcador=function(e){t.setState(function(a){return{marcadores:a.marcadores.filter(function(a){return a.id!==e.id})}}),y.NotificationManager.success("O marcador foi deletado!","Sucesso!")},t.createMarcador=function(e){t.setState(function(a){return{marcadores:a.marcadores.concat([e])}}),y.NotificationManager.success("O marcador foi criado!","Sucesso!")},t.selecionarMarcador=function(e){t.setState({marcadorSelecionado:e}),t.abrirModal()},t.abrirModal=function(){t.setState({modalOpen:!0})},t.fecharModal=function(){t.setState({modalOpen:!1,marcadorSelecionado:null})},t.mostrarSobre=function(){y.NotificationManager.info("2018 \xa9 Giordanna De Gregoriis. Feito com React, usando a API do Google Maps e Foursquare","Sobre",6e3)},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"toggleLateral",value:function(){this.setState({isLateralToggled:!this.state.isLateralToggled})}},{key:"render",value:function(){var e,a=this;if(this.state.query){var t=new RegExp(w()(this.state.query),"i");e=this.state.marcadores.filter(function(e){return t.test(e.nome)})}else e=this.state.marcadores;return r.a.createElement("div",{className:"app"},r.a.createElement("nav",{className:"nav"},r.a.createElement("span",{className:"botao"},r.a.createElement("a",{href:"/"},"Mapa do Umarizal")),r.a.createElement("span",{className:"botao-direita"},r.a.createElement("a",{title:"Mostrar/Esconder Barra lateral",onClick:function(){return a.toggleLateral()}},"\u2630")),r.a.createElement("span",{className:"botao-direita"},r.a.createElement("a",{onClick:this.mostrarSobre},"Sobre"))),r.a.createElement(S,{query:this.state.query,updateQuery:this.updateQuery,isLateralToggled:this.state.isLateralToggled,marcadores:e,selecionarMarcador:this.selecionarMarcador,marcadorSelecionado:this.state.marcadorSelecionado}),r.a.createElement(b,{isLateralToggled:this.state.isLateralToggled,marcadores:e,selecionarMarcador:this.selecionarMarcador,marcadorSelecionado:this.state.marcadorSelecionado,createMarcador:this.createMarcador}),r.a.createElement("div",null,r.a.createElement(h.a,{open:this.state.modalOpen,onClose:this.fecharModal,center:!0},this.state.marcadorSelecionado&&r.a.createElement("div",null,r.a.createElement("h2",null,this.state.marcadorSelecionado.nome),r.a.createElement("p",null,r.a.createElement("strong",null,"Categoria: "),this.state.marcadorSelecionado.categoria),r.a.createElement("p",null,r.a.createElement("strong",null,"Endere\xe7o: "),this.state.marcadorSelecionado.endereco),r.a.createElement("a",{className:"botao-apagar",onClick:function(){a.removeMarcador(a.state.marcadorSelecionado),a.fecharModal()}},"Apagar"),r.a.createElement("img",{className:"imagem",src:this.state.marcadorSelecionado.img,alt:"Foto de "+this.state.marcadorSelecionado.titulo})))),r.a.createElement(y.NotificationContainer,null))}}]),a}(o.Component),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(L,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/mapa-bairro",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat("/mapa-bairro","/service-worker.js");M?(function(e,a){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):j(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):j(a,e)})}}()}},[[320,2,1]]]);
//# sourceMappingURL=main.e575904a.chunk.js.map